<!-- index.xhtml -->
<ui:composition template="/WEB-INF/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">
    <ui:define name="title">
        <h:outputText value="Profiles"/>
    </ui:define>
    <ui:define name="content">
        <div class="container mx-auto px-4">
            <div class="flex justify-center">
                <p:inputText id="search" styleClass="w-1/2 p-2 my-4 border rounded"/>
                <p:watermark for="search" value="Search my posts..."/>
            </div>
            <div class="flex justify-between mb-3">
                <h1 class="text-4xl font-bold mb-4">My Posts</h1>
                <p:commandButton value="Add Post" icon="pi pi-plus" styleClass="ui-button-primary"/>
            </div>
            <div class="grid grid-cols-1 gap-4 sm:grid-cols-3">
                <ui:fragment rendered="#{not empty userBean.posts}">
                    <ui:repeat value="#{userBean.posts}" var="post">
                        <p:panel styleClass="mb-4 p-4 border rounded shadow">
                            <f:facet name="header">
                                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                                    <h:outputText value="#{post.title}"/>
                                    <div class="flex gap-2">
                                        <p:commandButton type="button" title="Modify" icon="pi pi-pencil"
                                                         styleClass="ui-button-secondary"/>
                                        <p:commandButton type="button" title="Delete" icon="pi pi-trash"
                                                         styleClass="ui-button-danger"/>
                                    </div>
                                </div>
                            </f:facet>
                            <h:outputText value="#{post.content}" styleClass="text-base" style="word-wrap: break-word;"/>
                        </p:panel>
                    </ui:repeat>
                </ui:fragment>
                <ui:fragment rendered="#{empty userBean.posts}">
                    <h2 class="text-2xl">You don't have any posts</h2>
                </ui:fragment>
            </div>
        </div>
    </ui:define>
</ui:composition>